pex$ce_fev1_end[i-1] <- pex$ce_fev1_end[i]
pex$ce_fef25_end[i-1] <- pex$ce_fef25_end[i]
pex$combined[i] <- 1
} else {
pex$combined[i] <- 0
}
}
pex <- pex[pex$combined != 1, ]
lengthbt_new <- matrix(data = NA, nrow = nrow(pex), ncol = 2)
lengthbt_new[1, 2] <- NA
pex <- pex[order(pex$cffidno), ]
for(i in 2:nrow(pex)){
lengthbt_new[i, 1] <- pex$cffidno[i]
if(identical(pex$cffidno[i], pex$cffidno[i-1])){
lengthbt_new[i, 2] <- pex$StartAge_day[i] - pex$EndAge_day[i-1]
} else {
lengthbt_new[i, 2] <- NA
}
}
lengthbt_new <- as.data.frame(lengthbt_new)
colnames(lengthbt_new) <- c("cffidno1", "lengthbtpex")
pex <- pex[, -which(colnames(pex) == "lengthbtpex")]
pex <- pex[, -which(colnames(pex) == "lessthan7")]
pex <- pex[, -which(colnames(pex) == "ident")]
pex <- pex[, -which(colnames(pex) == "combined")]
pex_new <- cbind.data.frame(pex, lengthbt_new)
pex_new <- pex_new[, -which(colnames(pex_new) == "cffidno1")]
pex <- pex_new
rm(pex_new)
pex$diff_fvc <- pex$ce_fvc_end - pex$ce_fvc_begin
pex$diff_fev1 <- pex$ce_fev1_end - pex$ce_fev1_begin
pex$diff_fef25 <- pex$ce_fef25_end - pex$ce_fef25_begin
pex$ep_length <- pex$EndAge_day - pex$StartAge_day
pex$ce_fef25_begin[pex$ce_fef25_begin == 0] <- NA
pex$ce_fev1_begin[pex$ce_fev1_begin == 0] <- NA
pex$ce_fvc_begin[pex$ce_fvc_begin == 0] <- NA
age_0 <- pex[which(pex$StartAge_day == 0), ]
**Table 2.** This figure displays the minimum, 25th percentile, median, 75th percentile, and maximum values of lengths of the `r nrow(pex)` episodes, after clinically defining that episodes must be at least 7 days apart to be considered separate episodes.
```{r, echo = FALSE}
lengthtab <- matrix(data = NA, nrow = 5, ncol = 2)
colnames(lengthtab) <- c("", "")
lengthtab[1:5, 1] <- c("Minimum", "25th percentile", "Median", "75th percentile", "Maximum")
lengthtab[1:5, 2] <- round(fivenum(pex$ep_length), 4)
kable(lengthtab)
over30days <- pex[pex$ep_length >= 30, c(which(colnames(pex) == "cffidno"),
which(colnames(pex) == "ep_length"))]
over30days <- over30days[is.na(over30days$ep_length) == F, ]
colnames(over30days) <- c("Patient ID", "Episode Length (days)")
test <- as.data.frame(table(over30days$cffidno))
length(unique(over30days$`Patient ID`))
names(test)
View(test)
test <- as.data.frame(table(over30days$`Patient ID`))
View(test)
colnames(test) <- c("cffidno", "Freq")
library(knitr)
pex_alldata <- read.csv("C:/Users/johnsra3/Documents/Thesis/DataRaw/Episode.csv", header = T)
pex <- pex_alldata[pex_alldata$rsn_pe == 1, ]
pex$StartAge_day <- pex$StartAge * 365
pex$EndAge_day <- pex$EndAge * 365
pex <- pex[, -which(colnames(pex) == "StartAge")]
pex <- pex[, -which(colnames(pex) == "EndAge")]
pex <- pex[, -which(colnames(pex) == "rsn_pe")]
pex <- pex[, -which(colnames(pex) == "ce_meas_age_begin")]
pex <- pex[, -which(colnames(pex) == "ce_meas_age_end")]
lengthbt <- matrix(data = NA, nrow = nrow(pex), ncol = 2)
lengthbt[1, 2] <- NA
pex <- pex[order(pex$cffidno), ]
for(i in 2:nrow(pex)){
lengthbt[i, 1] <- pex$cffidno[i]
if(identical(pex$cffidno[i], pex$cffidno[i-1])){
lengthbt[i, 2] <- pex$StartAge_day[i] - pex$EndAge_day[i-1]
} else {
lengthbt[i, 2] <- NA
}
}
lengthbt <- as.data.frame(lengthbt)
colnames(lengthbt) <- c("cffidno1", "lengthbtpex")
pex_gr0 <- cbind.data.frame(pex, lengthbt)
pex_gr0 <- pex_gr0[, -which(colnames(pex_gr0) == "cffidno1")]
pex <- pex_gr0
rm(pex_gr0)
pex$ident <- NA
for(i in 2:nrow(pex)){
if(identical(pex$cffidno[i-1], pex$cffidno[i])){
pex$ident[i] <- 1
} else {
pex$ident[i] <- 0
}
}
pex$lessthan7 <- ifelse(pex$lengthbtpex <= 7, 1, 0)
pex$combined <- NA
compare_test <- pex
for(i in 2:nrow(pex)){
if(pex$ident[i] == 1 & pex$lessthan7[i] == 1 & !is.na(pex$lessthan7[i])){
pex$EndAge_day[i-1] <- pex$EndAge_day[i]
pex$ce_fvc_end[i-1] <- pex$ce_fvc_end[i]
pex$ce_fev1_end[i-1] <- pex$ce_fev1_end[i]
pex$ce_fef25_end[i-1] <- pex$ce_fef25_end[i]
pex$combined[i] <- 1
} else {
pex$combined[i] <- 0
}
}
pex <- pex[pex$combined != 1, ]
lengthbt_new <- matrix(data = NA, nrow = nrow(pex), ncol = 2)
lengthbt_new[1, 2] <- NA
pex <- pex[order(pex$cffidno), ]
for(i in 2:nrow(pex)){
lengthbt_new[i, 1] <- pex$cffidno[i]
if(identical(pex$cffidno[i], pex$cffidno[i-1])){
lengthbt_new[i, 2] <- pex$StartAge_day[i] - pex$EndAge_day[i-1]
} else {
lengthbt_new[i, 2] <- NA
}
}
lengthbt_new <- as.data.frame(lengthbt_new)
colnames(lengthbt_new) <- c("cffidno1", "lengthbtpex")
pex <- pex[, -which(colnames(pex) == "lengthbtpex")]
pex <- pex[, -which(colnames(pex) == "lessthan7")]
pex <- pex[, -which(colnames(pex) == "ident")]
pex <- pex[, -which(colnames(pex) == "combined")]
pex_new <- cbind.data.frame(pex, lengthbt_new)
pex_new <- pex_new[, -which(colnames(pex_new) == "cffidno1")]
pex <- pex_new
rm(pex_new)
pex$diff_fvc <- pex$ce_fvc_end - pex$ce_fvc_begin
pex$diff_fev1 <- pex$ce_fev1_end - pex$ce_fev1_begin
pex$diff_fef25 <- pex$ce_fef25_end - pex$ce_fef25_begin
pex$ep_length <- pex$EndAge_day - pex$StartAge_day
pex$ce_fef25_begin[pex$ce_fef25_begin == 0] <- NA
pex$ce_fev1_begin[pex$ce_fev1_begin == 0] <- NA
pex$ce_fvc_begin[pex$ce_fvc_begin == 0] <- NA
age_0 <- pex[which(pex$StartAge_day == 0), ]
lengthtab <- matrix(data = NA, nrow = 5, ncol = 2)
colnames(lengthtab) <- c("", "")
lengthtab[1:5, 1] <- c("Minimum", "25th percentile", "Median", "75th percentile", "Maximum")
lengthtab[1:5, 2] <- round(fivenum(pex$ep_length), 4)
kable(lengthtab)
over30days <- pex[pex$ep_length >= 30, c(which(colnames(pex) == "cffidno"),
which(colnames(pex) == "ep_length"))]
over30days <- over30days[is.na(over30days$ep_length) == F, ]
colnames(over30days) <- c("Patient ID", "Episode Length (days)")
test <- as.data.frame(table(over30days$`Patient ID`))
colnames(test) <- c("cffidno", "Freq")
names(over309)
names(over30days)
names(over30days)
over30days$`Patient ID`
unique(over30days$`Patient ID`)
length(unique(over30days$`Patient ID`))
min(test$Freq)
max(test$Freq)
mean(test$Freq)
median(test$Freq)
install.packages("nlme")
?lme
library(nlme)
?lme
mean <- 0
var <- 1000
sd <- sqrt(var)
x <- seq(-4,4,length=1000)*sd + mean
hx <- dnorm(x,mean,sd)
plot(hx)
plot(hx ~ x)
plot(hx ~ x, pch = ".")
abline(h = -83.2590)
abline(x = -83.2590)
abline(v = -83.2590)
abline(v = -81.7680)
sqrt(43560)
sqrt(304920)
library(haven)
setwd("~/School/AdvancedData")
vadata <- read_sas("~/School/AdvancedData/vadata2.sas7bdat")
rec <- vadata[vadata$sixmonth == 39, ]
old <- vadata[vadata$sixmonth != 39, ]
alb_miss <- vadata[is.na(vadata$albumin) == T, ]
alb_pres <- vadata[is.na(vadata$albumin) == F, ]
summary(vadtaa)
summary(vadata)
names(vadata)
hist(vadata$albumin)
summary(vadata$albumin)
library(haven)
setwd("~/School/AdvancedData")
vadata <- read_sas("~/School/AdvancedData/vadata2.sas7bdat")
names(vadata)
vadata <- vadata[, -c(which(colnames(vadata) == "height"),
which(colnames(vadata) == "weight"))]
rec <- vadata[vadata$sixmonth == 39, ]
old <- vadata[vadata$sixmonth != 39, ]
names(vadata)
summary(vadata)
hist(vadata$bmi)
summary(vadata$bmi)
lowbmi <- vadata[vadata$bmi < 15, ]
View(lowbmi)
lowbmi <- vadata[vadata$bmi < 15 & is.na(vadata$bmi) == F, ]
View(lowbmi)
highbmi <- vadata[vadata$bmi > 50 & is.na(vadata$bmi) == F, ]
View(highbmi)
library(haven)
setwd("~/School/AdvancedData")
vadata <- read_sas("~/School/AdvancedData/vadata2.sas7bdat")
rec <- vadata[vadata$sixmonth == 39, ]
old <- vadata[vadata$sixmonth != 39, ]
names(vadata)
summary(vadata)
#missing data: <2% missing in proced, asa, weight, height, BMI
#largest missing data issue: albumin (missing 13241, ~50%)
hist(vadata$albumin)
summary(vadata$albumin)
#Normal range is 3.4-5.4; look w/ albumin
hist(vadata$bmi)
summary(vadata$bmi)
lowbmi <- vadata[vadata$bmi < 15 & is.na(vadata$bmi) == F, ]
highbmi <- vadata[vadata$bmi > 50 & is.na(vadata$bmi) == F, ]
View(highbmi)
View(lowbmi)
View(highbmi)
names(vadata)
table(vadata$hospcode)
length(unique(vadata$hospcode))
table(vadata$sixmonth)
table(vadata$proced)
vadata <- vadata[-vadata$proced == 2, ]
summary(vadata)
library(haven)
setwd("~/School/AdvancedData")
vadata <- read_sas("~/School/AdvancedData/vadata2.sas7bdat")
#==========================================================#
# Divide into different data sets
#==========================================================#
rec <- vadata[vadata$sixmonth == 39, ]
old <- vadata[vadata$sixmonth != 39, ]
names(vadata)
table(vadata$hospcode)
length(unique(vadata$hospcode))
length(unique(vadata$sixmonth))
table(vadata$proced)
proc2 <- which(vadata$proced == 2)
vadata <- vadata[-which(vadata$proced == 2), ]
table(vadata$asa)
hist(vadata$asa)
summary(vadata$weight)
hist(vadata$weight)
summary(vadata$height)
hist(vadata$height)
hist(vadata$bmi)
summary(vadata$bmi)
table(vadata$death30)
nrow(vadata[vadata$death30 == 1, ])/nrow(vadtaa)
nrow(vadata[vadata$death30 == 1, ])/nrow(vadata) * 100
summary(vadata$bmi)
hist(vadata$bmi)
lowbmi <- vadata[vadata$bmi < 15 & is.na(vadata$bmi) == F, ]
View(lowbmi)
hist(vadata$albumin)
summary(vadata$albumin)
plot(vadata$asa, vadata$albumin)
table(vadata$death30)
nrow(vadata$death30[vadata$death30 == 1])/nrow*(vadata) * 100
nrow(vadata[vadata$death30 == 1])/nrow*(vadata) * 100
nrow(vadata[vadata$death30 == 1])/nrow(vadata) * 100
nrow(vadata$death30[vadata$death30 == 1])/nrow(vadata) * 100
vadata$death30[vadata$death30 == 1]
nrow(adata$death30[vadata$death30 == 1])
nrow(vadata$death30[vadata$death30 == 1])
length(vadata$death30[vadata$death30 == 1])
length(vadata$death30[vadata$death30 == 1])/nrow(vadata) * 100
names(vadata)
tabdata <- vadata
tabdata <- tabdata[, c(which(colnames(tabdata) == "weight"),
which(colnames(tabdata) == "height"))]
nrow(tabdata)
ncol(tabdata)
tabdata <- vadata
tabdata <- tabdata[, -c(which(colnames(tabdata) == "weight"),
which(colnames(tabdata) == "height"))]
names(tabdata)
summary(tabdata$asa)
summary(tabdata$death30)
rows <- 1 + 1 + 3 + 4 + 2 + 2 + 1
tab <- matrix(data = NA, nrow = rows, ncol = 2)
colnames(tab) <- c("", "")
View(tabdata)
View(tabdata)
View(tab)
names(tabdata)
tabdata[1, 1] <- "Hospitals"
tabdata[1, 2] <- length(unique(tabdata$hospcode))
tabdata <- vadata
tabdata <- tabdata[, -c(which(colnames(tabdata) == "weight"),
which(colnames(tabdata) == "height"))]
names(tabdata)
rows <- 1 + 1 + 3 + 4 + 2 + 2 + 1
tab <- matrix(data = NA, nrow = rows, ncol = 2)
colnames(tab) <- c("", "")
tab[1, 1] <- "Hospitals"
tab[1, 2] <- length(unique(tabdata$hospcode))
View(tab)
tabdata <- tabdata[, -c(which(colnames(tabdata) == "weight"),
which(colnames(tabdata) == "height"),
which(colnames(tabdata) == "sixmonth"))]
names(tabdata)
rows <- 1  + 3 + 4 + 2 + 2 + 1
tab <- matrix(data = NA, nrow = rows, ncol = 2)
colnames(tab) <- c("", "")
tab[1, 1] <- "Hospitals"
tab[1, 2] <- length(unique(tabdata$hospcode))
tab[2, 1] <- "Procedure"
tab[3:4, 1] <- c("Valve surgery", "CABG surgery")
tab[3, 2] <- paste(nrow(tabdata[tabdata$proced == 0, ]), "(",
round(nrow(tabdata[tabdata$proced == 0, ]/nrow(tabdata) * 100, 2)), ")")
tab[3, 2] <- paste(nrow(tabdata[tabdata$proced == 0, ]), "(",
round(nrow(tabdata[tabdata$proced == 0, ])/nrow(tabdata) * 100, 2), ")")
tab[3, 2] <- paste(nrow(tabdata[tabdata$proced == 0, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 0, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[4, 2] <- paste(nrow(tabdata[tabdata$proced == 1, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 1, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
rows <- 1 + 1 + 3 + 4 + 2 + 2 + 1
tab <- matrix(data = NA, nrow = rows, ncol = 2)
colnames(tab) <- c("", "")
tab[1, 1] <- "Hospitals"
tab[1, 2] <- length(unique(tabdata$hospcode))
tab[2, 1] <- "Patients undergoing heart surgery"
tab[3, 1] <- nrow(tabdata)
tab[2, 2] <- nrow(tabdata)
tab[3, 1] <- "Procedure"
tab[4:5, 1] <- c("Valve surgery", "CABG surgery")
tab[4, 2] <- paste(nrow(tabdata[tabdata$proced == 0, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 0, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[5, 2] <- paste(nrow(tabdata[tabdata$proced == 1, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 1, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
names(tabdata)
tab[6, 1] <- "ASA"
tab[7:11, 1] <- c("1 = good health", "2", "3", "4", "5 = near death")
summary(tabdata$asa)
tab[6, 1] <- "ASA"
tab[7:12, 1] <- c("1 = good health", "2", "3", "4", "5 = near death", "Missing")
rows <- 1 + 1 + 3 + 6 + 2 + 2 + 1
tab <- matrix(data = NA, nrow = rows, ncol = 2)
colnames(tab) <- c("", "")
tab[1, 1] <- "Hospitals"
tab[1, 2] <- length(unique(tabdata$hospcode))
tab[2, 1] <- "Patients undergoing heart surgery"
tab[2, 2] <- nrow(tabdata)
tab[3, 1] <- "Procedure"
tab[4:5, 1] <- c("Valve surgery", "CABG surgery")
tab[4, 2] <- paste(nrow(tabdata[tabdata$proced == 0, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 0, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[5, 2] <- paste(nrow(tabdata[tabdata$proced == 1, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 1, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[6, 1] <- "ASA"
tab[7:12, 1] <- c("1 = good health", "2", "3", "4", "5 = near death", "Missing")
tab[7, 2] <- paste(nrow(tabdata[tabdata$asa == 1, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 1, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
summary(tabdata$asa)
table(tabdata$asa)
tab[7, 2] <- paste(nrow(tabdata[tabdata$asa == 1 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 1 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[8, 2] <- paste(nrow(tabdata[tabdata$asa == 2 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 2 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[9, 2] <- paste(nrow(tabdata[tabdata$asa == 3 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 3 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[10, 2] <- paste(nrow(tabdata[tabdata$asa == 4 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 4 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[11, 2] <- paste(nrow(tabdata[tabdata$asa == 5 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 5 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[12, 2] <- paste(nrow(tabdata[is.na(tabdata$asa) == T, ]), paste("(",
round(nrow(tabdata[is.na(tabdata$asa) == T, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
names(tabdata)
rows <- 1 + 1 + 3 + 6 + 2 + 2 + 3
tab <- matrix(data = NA, nrow = rows, ncol = 2)
colnames(tab) <- c("", "")
tab[1, 1] <- "Hospitals"
tab[1, 2] <- length(unique(tabdata$hospcode))
tab[2, 1] <- "Patients undergoing heart surgery"
tab[2, 2] <- nrow(tabdata)
tab[3, 1] <- "Procedure"
tab[4:5, 1] <- c("Valve surgery", "CABG surgery")
tab[4, 2] <- paste(nrow(tabdata[tabdata$proced == 0, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 0, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[5, 2] <- paste(nrow(tabdata[tabdata$proced == 1, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 1, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[6, 1] <- "ASA"
tab[7:12, 1] <- c("1 = good health", "2", "3", "4", "5 = near death", "Missing")
tab[7, 2] <- paste(nrow(tabdata[tabdata$asa == 1 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 1 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[8, 2] <- paste(nrow(tabdata[tabdata$asa == 2 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 2 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[9, 2] <- paste(nrow(tabdata[tabdata$asa == 3 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 3 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[10, 2] <- paste(nrow(tabdata[tabdata$asa == 4 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 4 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[11, 2] <- paste(nrow(tabdata[tabdata$asa == 5 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 5 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[12, 2] <- paste(nrow(tabdata[is.na(tabdata$asa) == T, ]), paste("(",
round(nrow(tabdata[is.na(tabdata$asa) == T, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
names(tabdata)
tab[13, 1] <- "BMI"
tab[13:14, 1] <- c("BMI", "Missing")
hist(tabdata)
hist(tabdata$bmi)
summary(tabdata$bmi)
IQR(tabdata$bmi)
IQR(tabdata$bmi, na.rm = T)
tab[13:14, 1] <- c("BMI (median (IQR))", "Missing")
tab[13, 2] <- paste(round(median(tabdata$bmi, na.rm = T), 2), "(",
round(IQR(tabdata$bmi, na.rm = T), 2), ")")
tab[13, 2] <- paste(round(median(tabdata$bmi, na.rm = T), 2), paste("(",
round(IQR(tabdata$bmi, na.rm = T), 2), ")"), sep = "")
tab[13, 2] <- paste(round(median(tabdata$bmi, na.rm = T), 2), paste("(",
round(IQR(tabdata$bmi, na.rm = T), 2), ")", sep = ""))
tab[14, 2] <- paste(nrow(tabdata[is.na(tabdata$bmi) == T, ]), paste("(",
round(nrow(tabdata[is.na(tabdata$bmi) == T, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
names(tabdata)
tab[15, 1] <- c("Albumin (median (IQR))", "Missing (n (%))")
tab[15:16, 1] <- c("Albumin (median (IQR))", "Missing (n (%))")
tab[15, 2] <- paste(round(median(tabdata$albumin, na.rm = T), 2), paste("(",
round(IQR(tabdata$albumin, na.rm = T), 2), ")", sep = ""))
tab[16, 2] <- paste(nrow(tabdata[is.na(tabdata$albumin) == T, ]), paste("(",
round(nrow(tabdata[is.na(tabdata$albumin) == T, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tabdata <- vadata
tabdata <- tabdata[, -c(which(colnames(tabdata) == "weight"),
which(colnames(tabdata) == "height"),
which(colnames(tabdata) == "sixmonth"))]
names(tabdata)
rows <- 1 + 1 + 3 + 6 + 2 + 2 + 1
tab <- matrix(data = NA, nrow = rows, ncol = 2)
colnames(tab) <- c("", "")
tab[1, 1] <- "Hospitals (n)"
tab[1, 2] <- length(unique(tabdata$hospcode))
tab[2, 1] <- "Patients undergoing heart surgery (n)"
tab[2, 2] <- nrow(tabdata)
tab[3, 1] <- "Procedure (n (%))"
tab[4:5, 1] <- c("Valve surgery", "CABG surgery")
tab[4, 2] <- paste(nrow(tabdata[tabdata$proced == 0, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 0, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[5, 2] <- paste(nrow(tabdata[tabdata$proced == 1, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 1, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[6, 1] <- "ASA (n (%))"
tab[7:12, 1] <- c("1 = good health", "2", "3", "4", "5 = near death", "Missing")
tab[7, 2] <- paste(nrow(tabdata[tabdata$asa == 1 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 1 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[8, 2] <- paste(nrow(tabdata[tabdata$asa == 2 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 2 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[9, 2] <- paste(nrow(tabdata[tabdata$asa == 3 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 3 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[10, 2] <- paste(nrow(tabdata[tabdata$asa == 4 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 4 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[11, 2] <- paste(nrow(tabdata[tabdata$asa == 5 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 5 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[12, 2] <- paste(nrow(tabdata[is.na(tabdata$asa) == T, ]), paste("(",
round(nrow(tabdata[is.na(tabdata$asa) == T, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[13:14, 1] <- c("BMI (median (IQR))", "Missing (n (%))")
tab[13, 2] <- paste(round(median(tabdata$bmi, na.rm = T), 2), paste("(",
round(IQR(tabdata$bmi, na.rm = T), 2), ")", sep = ""))
tab[14, 2] <- paste(nrow(tabdata[is.na(tabdata$bmi) == T, ]), paste("(",
round(nrow(tabdata[is.na(tabdata$bmi) == T, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[15:16, 1] <- c("Albumin (median (IQR))", "Missing (n (%))")
tab[15, 2] <- paste(round(median(tabdata$albumin, na.rm = T), 2), paste("(",
round(IQR(tabdata$albumin, na.rm = T), 2), ")", sep = ""))
tab[16, 2] <- paste(nrow(tabdata[is.na(tabdata$albumin) == T, ]), paste("(",
round(nrow(tabdata[is.na(tabdata$albumin) == T, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
rows <- 1 + 1 + 3 + 6 + 2 + 3 + 1
tab <- matrix(data = NA, nrow = rows, ncol = 2)
colnames(tab) <- c("", "")
tab[1, 1] <- "Hospitals (n)"
tab[1, 2] <- length(unique(tabdata$hospcode))
tab[2, 1] <- "Patients undergoing heart surgery (n)"
tab[2, 2] <- nrow(tabdata)
tab[3, 1] <- "Procedure (n (%))"
tab[4:5, 1] <- c("Valve surgery", "CABG surgery")
tab[4, 2] <- paste(nrow(tabdata[tabdata$proced == 0, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 0, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[5, 2] <- paste(nrow(tabdata[tabdata$proced == 1, ]), paste("(",
round(nrow(tabdata[tabdata$proced == 1, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[6, 1] <- "ASA (n (%))"
tab[7:12, 1] <- c("1 = good health", "2", "3", "4", "5 = near death", "Missing")
tab[7, 2] <- paste(nrow(tabdata[tabdata$asa == 1 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 1 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[8, 2] <- paste(nrow(tabdata[tabdata$asa == 2 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 2 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[9, 2] <- paste(nrow(tabdata[tabdata$asa == 3 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 3 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[10, 2] <- paste(nrow(tabdata[tabdata$asa == 4 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 4 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[11, 2] <- paste(nrow(tabdata[tabdata$asa == 5 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$asa == 5 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[12, 2] <- paste(nrow(tabdata[is.na(tabdata$asa) == T, ]), paste("(",
round(nrow(tabdata[is.na(tabdata$asa) == T, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[13:14, 1] <- c("BMI (median (IQR))", "Missing (n (%))")
tab[13, 2] <- paste(round(median(tabdata$bmi, na.rm = T), 2), paste("(",
round(IQR(tabdata$bmi, na.rm = T), 2), ")", sep = ""))
tab[14, 2] <- paste(nrow(tabdata[is.na(tabdata$bmi) == T, ]), paste("(",
round(nrow(tabdata[is.na(tabdata$bmi) == T, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[15:16, 1] <- c("Albumin (median (IQR))", "Missing (n (%))")
tab[15, 2] <- paste(round(median(tabdata$albumin, na.rm = T), 2), paste("(",
round(IQR(tabdata$albumin, na.rm = T), 2), ")", sep = ""))
tab[16, 2] <- paste(nrow(tabdata[is.na(tabdata$albumin) == T, ]), paste("(",
round(nrow(tabdata[is.na(tabdata$albumin) == T, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[17, 1] <- "Deaths (n (%))"
tab[17, 2] <- paste(round(median(tabdata$death30, na.rm = T), 2), paste("(",
round(IQR(tabdata$death30, na.rm = T), 2), ")", sep = ""))
tab[17, 2] <- paste(nrow(tabdata[tabdata$death30 == 5 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$death30 == 5 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
tab[17, 2] <- paste(nrow(tabdata[tabdata$death30 == 1 & is.na(tabdata$asa) == F, ]), paste("(",
round(nrow(tabdata[tabdata$death30 == 1 & is.na(tabdata$asa) == F, ])/nrow(tabdata) * 100, 2), ")", sep = ""))
setwd("C:/Repositories/bios6623-johnsra3/Project1/Reports")
